{
  "stack_info": {
    "service_name": "t1.sedaily.ai",
    "stack_prefix": "nx-tt-dev-ver3",
    "aws_region": "us-east-1",
    "aws_account_id": "887078546492",
    "environment": "production",
    "last_updated": "2025-12-14",
    "custom_domain": "https://t1.sedaily.ai"
  },
  "frontend": {
    "s3": {
      "bucket_name": "nexus-title-hub-frontend",
      "region": "us-east-1",
      "arn": "arn:aws:s3:::nexus-title-hub-frontend",
      "website_hosting": true,
      "total_objects": 2,
      "total_size_bytes": 1037787,
      "main_files": [
        {
          "name": "index.html",
          "size_bytes": 629,
          "last_modified": "2025-11-26T09:51:22Z"
        },
        {
          "name": "pdf.worker.min.js",
          "size_bytes": 1037158,
          "last_modified": "2025-11-26T09:51:19Z"
        }
      ]
    },
    "cloudfront": {
      "distribution_id": "EIYU5SFVTHQMN",
      "domain_name": "d1s58eamawxu4.cloudfront.net",
      "arn": "arn:aws:cloudfront::887078546492:distribution/EIYU5SFVTHQMN",
      "status": "Deployed",
      "enabled": true,
      "custom_domain": "t1.sedaily.ai"
    }
  },
  "api_gateway": {
    "rest_api": {
      "api_id": "qyfams2iva",
      "name": "nx-tt-dev-ver3-api",
      "url": "https://qyfams2iva.execute-api.us-east-1.amazonaws.com/prod",
      "arn": "arn:aws:apigateway:us-east-1::/restapis/qyfams2iva",
      "stage": "prod",
      "created_date": "2025-08-23T09:54:02+09:00",
      "endpoint_type": "EDGE",
      "routes": [
        "POST /conversations",
        "GET /conversations",
        "PUT /conversations/{id}",
        "DELETE /conversations/{id}",
        "POST /prompts",
        "GET /prompts",
        "PUT /prompts/{id}",
        "DELETE /prompts/{id}",
        "POST /usage",
        "GET /usage"
      ]
    },
    "websocket_api": {
      "api_id": "hsdpbajz23",
      "name": "nx-tt-dev-ver3-websocket-api",
      "url": "wss://hsdpbajz23.execute-api.us-east-1.amazonaws.com/prod",
      "arn": "arn:aws:apigateway:us-east-1::/apis/hsdpbajz23",
      "stage": "prod",
      "created_date": "2025-08-23T02:51:12+00:00",
      "protocol": "WEBSOCKET",
      "route_selection_expression": "$request.body.action",
      "routes": [
        "$connect",
        "$disconnect",
        "$default",
        "sendMessage"
      ]
    }
  },
  "lambda_functions": {
    "websocket_handlers": {
      "connect": {
        "function_name": "nx-tt-dev-ver3-websocket-connect",
        "arn": "arn:aws:lambda:us-east-1:887078546492:function:nx-tt-dev-ver3-websocket-connect",
        "runtime": "python3.11",
        "code_size": 67525,
        "last_modified": "2025-12-02T06:33:58.000+0000",
        "timeout": 30,
        "memory": 512,
        "role": "nx-tt-dev-ver3-websocket-role"
      },
      "message": {
        "function_name": "nx-tt-dev-ver3-websocket-message",
        "arn": "arn:aws:lambda:us-east-1:887078546492:function:nx-tt-dev-ver3-websocket-message",
        "runtime": "python3.11",
        "code_size": 21662581,
        "last_modified": "2025-12-14T14:50:30.000+0000",
        "timeout": 120,
        "memory": 512,
        "role": "nx-tt-dev-ver3-websocket-role"
      },
      "disconnect": {
        "function_name": "nx-tt-dev-ver3-websocket-disconnect",
        "arn": "arn:aws:lambda:us-east-1:887078546492:function:nx-tt-dev-ver3-websocket-disconnect",
        "runtime": "python3.11",
        "code_size": 67525,
        "last_modified": "2025-12-02T06:33:59.000+0000",
        "timeout": 30,
        "memory": 512,
        "role": "nx-tt-dev-ver3-websocket-role"
      }
    },
    "api_handlers": {
      "conversation": {
        "function_name": "nx-tt-dev-ver3-conversation-api",
        "arn": "arn:aws:lambda:us-east-1:887078546492:function:nx-tt-dev-ver3-conversation-api",
        "runtime": "python3.11",
        "code_size": 21662581,
        "last_modified": "2025-12-14T14:50:44.000+0000",
        "timeout": 30,
        "memory": 512,
        "role": "nx-tt-dev-ver3-api-role"
      },
      "prompt": {
        "function_name": "nx-tt-dev-ver3-prompt-crud",
        "arn": "arn:aws:lambda:us-east-1:887078546492:function:nx-tt-dev-ver3-prompt-crud",
        "runtime": "python3.11",
        "code_size": 21662581,
        "last_modified": "2025-12-14T14:50:57.000+0000",
        "timeout": 30,
        "memory": 512,
        "role": "nx-tt-dev-ver3-api-role"
      },
      "usage": {
        "function_name": "nx-tt-dev-ver3-usage-handler",
        "arn": "arn:aws:lambda:us-east-1:887078546492:function:nx-tt-dev-ver3-usage-handler",
        "runtime": "python3.9",
        "code_size": 21662581,
        "last_modified": "2025-12-14T14:51:11.000+0000",
        "timeout": 30,
        "memory": 512,
        "role": "nx-tt-dev-ver3-api-role"
      }
    },
    "admin_handlers": {
      "vector_populate": {
        "function_name": "nx-tt-dev-ver3-vector-populate",
        "arn": "arn:aws:lambda:us-east-1:887078546492:function:nx-tt-dev-ver3-vector-populate",
        "runtime": "python3.11",
        "code_size": 20715842,
        "last_modified": "2025-12-02T06:20:18.000+0000",
        "timeout": 300,
        "memory": 512,
        "role": "nx-tt-dev-ver3-admin-role"
      }
    },
    "legacy_functions": {
      "conversation_handler": {
        "function_name": "nx-tt-dev-ver3-ConversationHandler",
        "arn": "arn:aws:lambda:us-east-1:887078546492:function:nx-tt-dev-ver3-ConversationHandler",
        "runtime": "python3.9",
        "code_size": 3435,
        "last_modified": "2025-09-04T08:00:02.000+0000",
        "status": "legacy"
      },
      "title_generation": {
        "function_name": "nx-tt-dev-ver3-title-generation",
        "arn": "arn:aws:lambda:us-east-1:887078546492:function:nx-tt-dev-ver3-title-generation",
        "runtime": "python3.11",
        "code_size": 2453,
        "last_modified": "2025-08-23T01:19:22.000+0000",
        "status": "legacy"
      },
      "websocket_message_test": {
        "function_name": "nx-tt-dev-ver3-websocket-message-test",
        "arn": "arn:aws:lambda:us-east-1:887078546492:function:nx-tt-dev-ver3-websocket-message-test",
        "runtime": "python3.11",
        "code_size": 32773,
        "last_modified": "2025-09-04T12:06:03.000+0000",
        "status": "test"
      }
    }
  },
  "dynamodb": {
    "tables": {
      "conversations": {
        "table_name": "nx-tt-dev-ver3-conversations",
        "arn": "arn:aws:dynamodb:us-east-1:887078546492:table/nx-tt-dev-ver3-conversations",
        "status": "ACTIVE",
        "creation_date": "2025-08-23T23:53:00.697000+09:00",
        "item_count": 955,
        "size_bytes": 7663565,
        "billing_mode": "PAY_PER_REQUEST",
        "primary_key": {
          "partition_key": "conversation_id",
          "sort_key": null
        }
      },
      "prompts": {
        "table_name": "nx-tt-dev-ver3-prompts",
        "arn": "arn:aws:dynamodb:us-east-1:887078546492:table/nx-tt-dev-ver3-prompts",
        "status": "ACTIVE",
        "billing_mode": "PAY_PER_REQUEST",
        "primary_key": {
          "partition_key": "prompt_id",
          "sort_key": null
        }
      },
      "files": {
        "table_name": "nx-tt-dev-ver3-files",
        "arn": "arn:aws:dynamodb:us-east-1:887078546492:table/nx-tt-dev-ver3-files",
        "status": "ACTIVE",
        "billing_mode": "PAY_PER_REQUEST",
        "primary_key": {
          "partition_key": "file_id",
          "sort_key": null
        }
      },
      "usage_tracking": {
        "table_name": "nx-tt-dev-ver3-usage-tracking",
        "arn": "arn:aws:dynamodb:us-east-1:887078546492:table/nx-tt-dev-ver3-usage-tracking",
        "status": "ACTIVE",
        "billing_mode": "PAY_PER_REQUEST",
        "primary_key": {
          "partition_key": "user_id",
          "sort_key": "timestamp"
        }
      },
      "websocket_connections": {
        "table_name": "nx-tt-dev-ver3-websocket-connections",
        "arn": "arn:aws:dynamodb:us-east-1:887078546492:table/nx-tt-dev-ver3-websocket-connections",
        "status": "ACTIVE",
        "billing_mode": "PAY_PER_REQUEST",
        "primary_key": {
          "partition_key": "connection_id",
          "sort_key": null
        },
        "ttl_attribute": "expires_at"
      }
    }
  },
  "rds": {
    "aurora_postgresql": {
      "cluster_identifier": "nx-tt-vector-db",
      "arn": "arn:aws:rds:us-east-1:887078546492:cluster:nx-tt-vector-db",
      "status": "available",
      "engine": "aurora-postgresql",
      "engine_version": "15.12",
      "endpoint": "nx-tt-vector-db.cluster-c83iuyksky7r.us-east-1.rds.amazonaws.com",
      "port": 5432,
      "database_name": "vectordb",
      "master_username": "postgres",
      "backup_retention_period": 7,
      "encryption_enabled": true,
      "multi_az": true
    }
  },
  "secrets_manager": {
    "secrets": {
      "anthropic_api_key": {
        "name": "claude-opus-45-api-key",
        "arn": "arn:aws:secretsmanager:us-east-1:887078546492:secret:claude-opus-45-api-key",
        "description": "Anthropic Claude API Key for AI processing",
        "rotation_enabled": false,
        "last_rotated": null,
        "next_rotation": null
      }
    }
  },
  "iam": {
    "roles": [
      {
        "role_name": "nx-tt-dev-ver3-lambda-execution-role",
        "arn": "arn:aws:iam::887078546492:role/nx-tt-dev-ver3-lambda-execution-role",
        "description": "Lambda execution role with basic permissions",
        "attached_policies": [
          "AWSLambdaBasicExecutionRole",
          "DynamoDBFullAccess",
          "SecretsManagerReadWrite"
        ]
      },
      {
        "role_name": "nx-tt-dev-ver3-api-gateway-role",
        "arn": "arn:aws:iam::887078546492:role/nx-tt-dev-ver3-api-gateway-role",
        "description": "API Gateway execution role",
        "attached_policies": [
          "AmazonAPIGatewayInvokeFullAccess"
        ]
      }
    ],
    "policies": [
      {
        "policy_name": "nx-tt-dev-ver3-dynamodb-policy",
        "arn": "arn:aws:iam::887078546492:policy/nx-tt-dev-ver3-dynamodb-policy",
        "description": "DynamoDB access policy for the application"
      },
      {
        "policy_name": "nx-tt-dev-ver3-secrets-policy",
        "arn": "arn:aws:iam::887078546492:policy/nx-tt-dev-ver3-secrets-policy",
        "description": "Secrets Manager access policy"
      }
    ]
  },
  "ai_configuration": {
    "primary_provider": {
      "name": "anthropic_api",
      "enabled": true,
      "model_id": "claude-opus-4-5-20251101",
      "max_tokens": 4096,
      "temperature": 0.3,
      "secret_arn": "arn:aws:secretsmanager:us-east-1:887078546492:secret:claude-opus-45-api-key"
    },
    "fallback_provider": {
      "name": "aws_bedrock",
      "enabled": true,
      "model_id": "us.anthropic.claude-sonnet-4-20250514-v1:0",
      "max_tokens": 16384,
      "temperature": 0.81,
      "top_k": 50
    },
    "rag_configuration": {
      "enabled": true,
      "top_k": 10,
      "min_similarity": 0.7,
      "max_tokens": 15000,
      "vector_db_endpoint": "nx-tt-vector-db.cluster-c83iuyksky7r.us-east-1.rds.amazonaws.com"
    }
  },
  "monitoring": {
    "cloudwatch": {
      "log_groups": [
        "/aws/lambda/nx-tt-dev-ver3-websocket-connect",
        "/aws/lambda/nx-tt-dev-ver3-websocket-message",
        "/aws/lambda/nx-tt-dev-ver3-websocket-disconnect",
        "/aws/lambda/nx-tt-dev-ver3-conversation-api",
        "/aws/lambda/nx-tt-dev-ver3-prompt-crud",
        "/aws/lambda/nx-tt-dev-ver3-usage-handler",
        "/aws/lambda/nx-tt-dev-ver3-vector-populate",
        "/aws/apigateway/nx-tt-dev-ver3-api",
        "/aws/apigateway/nx-tt-dev-ver3-websocket-api"
      ],
      "retention_days": 14,
      "log_level": "INFO"
    },
    "metrics": {
      "lambda_metrics": [
        "Duration",
        "Errors",
        "Invocations",
        "Throttles"
      ],
      "api_gateway_metrics": [
        "Count",
        "Latency",
        "4XXError",
        "5XXError"
      ],
      "dynamodb_metrics": [
        "ConsumedReadCapacityUnits",
        "ConsumedWriteCapacityUnits",
        "ThrottledRequests"
      ]
    }
  },
  "deployment": {
    "scripts": {
      "backend": [
        "01-setup-dynamodb.sh",
        "02-setup-api-gateway.sh",
        "03-setup-api-routes.sh",
        "99-deploy-lambda.sh",
        "update-lambda-env.sh"
      ],
      "frontend": [
        "01-setup-cloudfront.sh",
        "02-setup-s3-policy.sh",
        "99-deploy-frontend.sh"
      ],
      "main": [
        "deploy-main.sh",
        "deploy-backend.sh",
        "deploy-frontend.sh"
      ],
      "backup": [
        "upgrade-scripts/"
      ]
    },
    "environment_variables": {
      "ENV": "production",
      "AWS_REGION": "us-east-1",
      "STACK_PREFIX": "nx-tt-dev-ver3",
      "USE_ANTHROPIC_API": "true",
      "FALLBACK_TO_BEDROCK": "true",
      "USE_RAG": "true",
      "LOG_LEVEL": "INFO"
    }
  },
  "tags": {
    "Stack": "nx-tt-dev-ver3",
    "Service": "t1.sedaily.ai",
    "Environment": "production",
    "Project": "nexus-title",
    "ManagedBy": "serverless-framework",
    "CostCenter": "ai-services"
  },
  "cost_optimization": {
    "recommendations": [
      "Consolidate Lambda runtime to python3.11",
      "Optimize Lambda memory allocation based on actual usage",
      "Consider Aurora Serverless for cost efficiency",
      "Implement DynamoDB auto-scaling",
      "Review CloudFront caching policies"
    ],
    "estimated_monthly_costs": {
      "lambda": "$50-100",
      "dynamodb": "$20-50",
      "aurora": "$200-400",
      "api_gateway": "$10-30",
      "cloudfront": "$5-15",
      "s3": "$1-5",
      "total_estimate": "$286-600"
    }
  },
  "security": {
    "encryption": {
      "at_rest": true,
      "in_transit": true,
      "kms_key": "aws/rds",
      "s3_encryption": "AES256"
    },
    "access_control": {
      "iam_roles": "principle_of_least_privilege",
      "api_authentication": "api_key",
      "cors_enabled": true
    },
    "compliance": {
      "gdpr_ready": true,
      "data_retention_policy": "configurable",
      "audit_logging": "cloudtrail"
    }
  },
  "disaster_recovery": {
    "backup_strategy": {
      "dynamodb": "point_in_time_recovery",
      "aurora": "automated_backup_7_days",
      "lambda": "versioned_deployments",
      "s3": "versioning_enabled"
    },
    "recovery_objectives": {
      "rto": "< 1 hour",
      "rpo": "< 15 minutes"
    }
  }
}