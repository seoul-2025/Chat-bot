import{j as e,c as F}from"./ui-vendor-0bbf3a53.js";import{b as P,r as b}from"./react-vendor-dc82ce15.js";import{H as V}from"./home-787e30b0.js";import{a as N}from"./index-5b8387d9.js";import{ADMIN_EMAIL as k}from"./config-22307f7a.js";import"./createLucideIcon-dbfc2db2.js";const _=({formData:a,isLoading:l,error:t,selectedEngine:m,needsVerification:u,verificationCode:n,rememberMe:i,onSubmit:s,onVerification:x,onResendCode:g,onInputChange:o,onForgotPassword:h,onVerificationCodeChange:f,onRememberMeChange:j,onBackToLogin:y,onGoToSignUp:v})=>u?e.jsx(z,{verificationCode:n,error:t,isLoading:l,onSubmit:x,onVerificationCodeChange:f,onResendCode:g,onBackToLogin:y}):e.jsx(L,{formData:a,isLoading:l,error:t,selectedEngine:m,rememberMe:i,onSubmit:s,onInputChange:o,onForgotPassword:h,onRememberMeChange:j,onGoToSignUp:v}),L=({formData:a,isLoading:l,error:t,selectedEngine:m,rememberMe:u,onSubmit:n,onInputChange:i,onForgotPassword:s,onRememberMeChange:x,onGoToSignUp:g})=>e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",style:{background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)"},children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-0 left-0 w-[550px] h-[550px] opacity-[0.12]",children:e.jsx("img",{src:"/images/illustrations/pen1.png",alt:"",className:"w-full h-full object-contain",style:{transform:"rotate(-15deg) translate(10%, 10%)",filter:"grayscale(100%) contrast(1.15) brightness(0.95)"}})}),e.jsx("div",{className:"absolute top-0 right-0 w-[550px] h-[550px] opacity-[0.12]",children:e.jsx("img",{src:"/images/illustrations/pen2.png",alt:"",className:"w-full h-full object-contain",style:{transform:"rotate(15deg) translate(-10%, 10%)",filter:"grayscale(100%) contrast(1.15) brightness(0.95)"}})}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[550px] h-[550px] opacity-[0.12]",children:e.jsx("img",{src:"/images/illustrations/pen3.png",alt:"",className:"w-full h-full object-contain",style:{transform:"rotate(15deg) translate(10%, -10%)",filter:"grayscale(100%) contrast(1.15) brightness(0.95)"}})}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[550px] h-[550px] opacity-[0.12]",children:e.jsx("img",{src:"/images/illustrations/pen4.png",alt:"",className:"w-full h-full object-contain",style:{transform:"rotate(-15deg) translate(-10%, -10%)",filter:"grayscale(100%) contrast(1.15) brightness(0.95)"}})}),e.jsx("div",{className:"absolute top-1/4 right-1/4 w-[750px] h-[750px]",style:{background:"radial-gradient(circle, rgba(102, 126, 234, 0.12) 0%, rgba(118, 75, 162, 0.08) 40%, rgba(90, 103, 216, 0.04) 60%, transparent 80%)",filter:"blur(100px)"}}),e.jsx("div",{className:"absolute bottom-1/4 left-1/4 w-[700px] h-[700px]",style:{background:"radial-gradient(circle, rgba(79, 172, 254, 0.10) 0%, rgba(0, 242, 254, 0.06) 40%, rgba(102, 126, 234, 0.03) 60%, transparent 80%)",filter:"blur(100px)"}}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px]",style:{background:"radial-gradient(circle, rgba(118, 75, 162, 0.08) 0%, rgba(102, 126, 234, 0.04) 50%, transparent 70%)",filter:"blur(80px)"}})]}),e.jsxs("a",{href:"/",className:"absolute top-6 sm:top-8 left-6 sm:left-8 flex items-center gap-2 px-4 sm:px-5 py-2.5 rounded-xl transition-all hover:scale-105 z-10 group",style:{backgroundColor:"rgba(255, 255, 255, 0.9)",color:"#4a5568",border:"1px solid rgba(226, 232, 240, 0.8)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)"},onMouseEnter:o=>{o.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.08)",o.currentTarget.style.backgroundColor="rgba(255, 255, 255, 1)"},onMouseLeave:o=>{o.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)",o.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.9)"},children:[e.jsx(V,{size:18,className:"transition-transform group-hover:-translate-x-0.5"}),e.jsx("span",{className:"font-medium text-sm hidden sm:inline",children:"í™ˆìœ¼ë¡œ"})]}),e.jsx("div",{className:"max-w-md w-full z-10",children:e.jsx("div",{className:"rounded-2xl shadow-xl overflow-hidden transform transition-all duration-300 hover:shadow-2xl",style:{backgroundColor:"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(25px)",border:"1px solid rgba(255, 255, 255, 0.9)",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.08), 0 4px 12px rgba(102, 126, 234, 0.05), 0 0 1px rgba(0, 0, 0, 0.1)"},children:e.jsxs("div",{className:"p-8 sm:p-10",children:[e.jsx("div",{className:"flex flex-col items-center mb-10",children:e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-0 rounded-full blur-3xl opacity-0 group-hover:opacity-30 transition-opacity duration-500",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",transform:"scale(1.5)"}}),e.jsx("img",{src:"/images/ainova.png",alt:"AI NOVA Logo",className:"w-56 h-56 object-contain relative z-10 transform transition-all duration-300 group-hover:scale-105"})]})}),e.jsxs("form",{className:"space-y-5",onSubmit:n,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(M,{id:"username",label:"ì´ë©”ì¼",type:"text",value:a.username,onChange:o=>i("username",o.target.value),autoComplete:"username",placeholder:"ì´ë©”ì¼ ì£¼ì†Œë¥¼ ìž…ë ¥í•˜ì„¸ìš”"}),e.jsx(M,{id:"password",label:"ë¹„ë°€ë²ˆí˜¸",type:"password",value:a.password,onChange:o=>i("password",o.target.value),autoComplete:"current-password",placeholder:"ë¹„ë°€ë²ˆí˜¸ë¥¼ ìž…ë ¥í•˜ì„¸ìš”"})]}),t&&e.jsx(R,{message:t}),e.jsx(T,{isLoading:l,text:l?"ë¡œê·¸ì¸ ì¤‘...":"ë¡œê·¸ì¸"}),e.jsxs("div",{className:"relative py-4",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t",style:{borderColor:"#e2e8f0"}})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"px-3",style:{backgroundColor:"rgba(255, 255, 255, 0.95)",color:"#a0aec0"},children:"ë˜ëŠ”"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("span",{className:"text-sm",style:{color:"#718096"},children:["ì•„ì§ ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”?"," "]}),e.jsx("button",{type:"button",className:"text-sm font-semibold hover:underline transition-colors",style:{color:"#667eea"},onClick:g,onMouseEnter:o=>o.target.style.color="#764ba2",onMouseLeave:o=>o.target.style.color="#667eea",children:"íšŒì›ê°€ìž…"})]})]})]})})})]}),z=({verificationCode:a,error:l,isLoading:t,onSubmit:m,onVerificationCodeChange:u,onResendCode:n,onBackToLogin:i})=>e.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",style:{backgroundColor:"hsl(var(--bg-100))"},children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold",style:{color:"hsl(var(--text-100))"},children:"ì´ë©”ì¼ ì¸ì¦"}),e.jsx("p",{className:"mt-2 text-center text-sm",style:{color:"hsl(var(--text-300))"},children:"ë“±ë¡ëœ ì´ë©”ì¼ë¡œ ë°œì†¡ëœ 6ìžë¦¬ ì¸ì¦ ì½”ë“œë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”"})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:m,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"code",className:"block text-sm font-medium mb-1",style:{color:"hsl(var(--text-200))"},children:"ì¸ì¦ ì½”ë“œ"}),e.jsx("input",{id:"code",name:"code",type:"text",maxLength:"6",required:!0,value:a,onChange:s=>u(s.target.value.replace(/[^0-9]/g,"")),className:"appearance-none relative block w-full px-3 py-2 text-center text-2xl tracking-widest rounded-md focus:outline-none focus:ring-2",style:{backgroundColor:"hsl(var(--bg-000))",border:"0.5px solid hsl(var(--border-300)/0.15)",color:"hsl(var(--text-100))"},placeholder:"000000"})]}),l&&e.jsx(R,{message:l}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(T,{isLoading:t,text:t?"ì¸ì¦ ì¤‘...":"ì¸ì¦í•˜ê¸°"}),e.jsx("button",{type:"button",onClick:n,disabled:t,className:"w-full text-sm hover:underline",style:{color:"hsl(var(--text-300))"},children:"ì¸ì¦ ì½”ë“œ ìž¬ë°œì†¡"}),e.jsx("button",{type:"button",onClick:i,className:"w-full text-sm hover:underline",style:{color:"hsl(var(--text-300))"},children:"ë¡œê·¸ì¸ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸°"})]})]})]})}),M=({id:a,label:l,type:t,value:m,onChange:u,autoComplete:n,placeholder:i})=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:a,className:"block text-sm font-bold mb-2.5",style:{color:"#1a202c",letterSpacing:"-0.01em"},children:l}),e.jsx("input",{id:a,name:a,type:t,autoComplete:n,required:!0,value:m,onChange:u,className:"appearance-none relative block w-full px-4 py-4 rounded-xl focus:outline-none text-base transition-all duration-300",style:{backgroundColor:"#ffffff",border:"2px solid #e2e8f0",color:"#2d3748",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.02)"},onFocus:s=>{s.target.style.borderColor="#667eea",s.target.style.boxShadow="0 0 0 4px rgba(102, 126, 234, 0.12), 0 4px 12px rgba(102, 126, 234, 0.08)",s.target.style.backgroundColor="#ffffff",s.target.style.transform="translateY(-1px)"},onBlur:s=>{s.target.style.borderColor="#e2e8f0",s.target.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.02)",s.target.style.backgroundColor="#ffffff",s.target.style.transform="translateY(0)"},placeholder:i})]}),R=({message:a})=>e.jsxs("div",{className:"rounded-xl p-4 flex items-start gap-3",style:{backgroundColor:"#fff5f5",border:"1px solid #feb2b2"},children:[e.jsx("svg",{className:"w-5 h-5 flex-shrink-0 mt-0.5",fill:"#f56565",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-sm flex-1",style:{color:"#c53030"},children:a})]}),T=({isLoading:a,text:l})=>e.jsxs("button",{type:"submit",disabled:a,className:F("group relative w-full flex justify-center items-center py-4 px-4 text-base font-bold rounded-xl focus:outline-none transition-all duration-300",a?"opacity-70 cursor-not-allowed":"hover:shadow-2xl active:scale-[0.98]"),style:{background:a?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"linear-gradient(135deg, #5a67d8 0%, #667eea 50%, #764ba2 100%)",color:"white",border:"none",boxShadow:a?"0 4px 14px rgba(102, 126, 234, 0.3)":"0 6px 20px rgba(102, 126, 234, 0.45), 0 2px 8px rgba(118, 75, 162, 0.2)",backgroundSize:"200% 100%",backgroundPosition:"left center"},onMouseEnter:t=>{a||(t.target.style.transform="translateY(-2px)",t.target.style.boxShadow="0 12px 35px rgba(102, 126, 234, 0.55), 0 4px 16px rgba(118, 75, 162, 0.3)",t.target.style.backgroundPosition="right center")},onMouseLeave:t=>{a||(t.target.style.transform="translateY(0)",t.target.style.boxShadow="0 6px 20px rgba(102, 126, 234, 0.45), 0 2px 8px rgba(118, 75, 162, 0.2)",t.target.style.backgroundPosition="left center")},children:[a&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l]}),U=a=>{const l=P(),[t,m]=b.useState({username:"",password:""}),[u,n]=b.useState(!1),[i,s]=b.useState(""),[x,g]=b.useState(a||"11"),[o,h]=b.useState(!1),[f,j]=b.useState(""),[y,v]=b.useState(!1);return b.useEffect(()=>{var d;(d=l.state)!=null&&d.engine?g(l.state.engine):a&&g(a);const c=localStorage.getItem("rememberUsername");c&&(m(r=>({...r,username:c})),v(!0))},[l,a]),{formData:t,isLoading:u,error:i,selectedEngine:x,needsVerification:o,verificationCode:f,rememberMe:y,handleSubmit:async c=>{var d;if(s(""),!t.username||!t.password){s("ì‚¬ìš©ìžëª…ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”.");return}n(!0);try{const r=await N.signIn(t.username,t.password);if(r.success){const C={...r.user,selectedEngine:x};localStorage.setItem("userInfo",JSON.stringify(C)),localStorage.setItem("authToken",r.tokens.accessToken),localStorage.setItem("idToken",r.tokens.idToken),localStorage.setItem("refreshToken",r.tokens.refreshToken),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("selectedEngine",x);let p="user",w="free";(t.username===k||r.user.email===k)&&(console.log("ðŸ” Admin email matched:",k),p="admin",w="premium"),console.log("ðŸ” Final userRole:",p),localStorage.setItem("userRole",p),localStorage.setItem("userPlan",w),localStorage.removeItem("usage_percentage_11"),localStorage.removeItem("usage_percentage_time_11"),localStorage.removeItem("usage_percentage_22"),localStorage.removeItem("usage_percentage_time_22"),y?localStorage.setItem("rememberUsername",t.username):localStorage.removeItem("rememberUsername"),window.dispatchEvent(new CustomEvent("userInfoUpdated")),c(p)}else r.needsNewPassword?s("ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ê´€ë¦¬ìžì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”."):s(r.error||"ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}catch(r){console.error("ë¡œê·¸ì¸ ì˜¤ë¥˜:",r),r.name==="UserNotConfirmedException"||(d=r.message)!=null&&d.includes("not confirmed")?(h(!0),s("ì´ë©”ì¼ ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤. ì¸ì¦ ì½”ë“œë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”.")):s(N.getErrorMessage(r)||"ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{n(!1)}},handleVerification:async c=>{if(s(""),!f||f.length!==6){s("6ìžë¦¬ ì¸ì¦ ì½”ë“œë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”.");return}n(!0);try{const d=await N.confirmSignUp(t.username,f);if(d.success){const r=await N.signIn(t.username,t.password);if(r.success){const C={...r.user,selectedEngine:x};localStorage.setItem("userInfo",JSON.stringify(C)),localStorage.setItem("authToken",r.tokens.accessToken),localStorage.setItem("idToken",r.tokens.idToken),localStorage.setItem("refreshToken",r.tokens.refreshToken),localStorage.setItem("isLoggedIn","true");let p="user",w="free";(t.username===k||r.user.email===k)&&(p="admin",w="premium"),localStorage.setItem("userRole",p),localStorage.setItem("userPlan",w),window.dispatchEvent(new CustomEvent("userInfoUpdated")),c(p)}else s("ì¸ì¦ì€ ì™„ë£Œë˜ì—ˆì§€ë§Œ ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”."),h(!1)}else s(d.error||"ì¸ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}catch(d){console.error("ì¸ì¦ ì˜¤ë¥˜:",d),s("ì¸ì¦ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{n(!1)}},handleResendCode:async()=>{s(""),n(!0);try{const c=await N.resendConfirmationCode(t.username);c.success?alert(c.message||"ì¸ì¦ ì½”ë“œê°€ ìž¬ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤."):s(c.error||"ì¸ì¦ ì½”ë“œ ìž¬ë°œì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}catch(c){console.error("ì¸ì¦ ì½”ë“œ ìž¬ë°œì†¡ ì˜¤ë¥˜:",c),s("ì¸ì¦ ì½”ë“œ ìž¬ë°œì†¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{n(!1)}},handleInputChange:(c,d)=>{m(r=>({...r,[c]:d})),s("")},handleForgotPassword:()=>{alert(`ë¹„ë°€ë²ˆí˜¸ ìž¬ì„¤ì • ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ìž…ë‹ˆë‹¤.
ê´€ë¦¬ìžì—ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.`)},setVerificationCode:j,setRememberMe:v,setNeedsVerification:h}},W=({onLogin:a,onGoToSignUp:l,selectedEngine:t})=>{const{formData:m,isLoading:u,error:n,selectedEngine:i,needsVerification:s,verificationCode:x,rememberMe:g,handleSubmit:o,handleVerification:h,handleResendCode:f,handleInputChange:j,handleForgotPassword:y,setVerificationCode:v,setRememberMe:I,setNeedsVerification:E}=U(t);return e.jsx(_,{formData:m,isLoading:u,error:n,selectedEngine:i,needsVerification:s,verificationCode:x,rememberMe:g,onSubmit:S=>{S.preventDefault(),o(a)},onVerification:S=>{S.preventDefault(),h(a)},onResendCode:f,onInputChange:j,onForgotPassword:y,onVerificationCodeChange:v,onRememberMeChange:I,onBackToLogin:()=>E(!1),onGoToSignUp:l})};export{W as default};
//# sourceMappingURL=LoginContainer-9425323d.js.map
